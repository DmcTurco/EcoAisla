<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="../css/adicionales.css">
    <title>Finalizacion</title>
</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-light py-3 fixed-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <h2 class="">Cotiza en linea</h2>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <!-- <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="medidas.html"><span
                                class="text-secondary"><strong>Medidas</strong></span></a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link " aria-current="page" href="colores.html"><span
                                class="text-secondary"><strong>Colores</strong></span></a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link " aria-current="page" href="estampados.html"><span
                                class="text-secondary"><strong>Estampados</strong></span></a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link " aria-current="page" href="#"><span
                                class="text-secondary"><strong>Adicionales</strong></span></a>
                    </li> -->
                    <li class="nav-item">
                        <a class="nav-link " aria-current="page" href="../index.html"><span
                                class="text-danger"><strong>Regresar</strong></span></a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <section class="p-5">
        <div class="container py-5">
            <hr size="6">
            <h3>Cotización Completada</h3>
            <div class="row">
                <div class="col-md-3"></div>
                <div class="col-md-6">
                    <div class="container">
                        <div class="row">
                            <form id="miFormulario">
                                <label for="medidas"><strong>Medidas:</strong></label>
                                <input class="form-control" type="text" id="medidas" name="medidas" required>
                                <br>
                                <div class="row py-2">
                                    <label for=""><strong>Colores - Estampados - Adicional:</strong></label>

                                    <div class="col-md-4">
                                        <div id="colorContainer"
                                            style="width: 60px; height: 60px; border-radius: 50%; margin-top: 10px;">
                                        </div>
                                        <span id="spanColoresEstampados"></span>
                                    </div>

                                    <div class="col-md-4">
                                        <div id="estapandoContainer"
                                            style="background-size: cover; width: 60px; height: 60px; border-radius: 50%;margin-top: 10px;">
                                        </div>
                                        <span id="spanEstampados"></span>
                                    </div>

                                    <div class="col-md-4">
                                        <div id="adicionalContainer"
                                            style="background-size: cover; width: 60px; height: 60px; border-radius: 50%;margin-top: 10px;">
                                        </div>
                                        <span id="spanAdicional"></span>
                                    </div>
                                </div>
                                <br>

                                <div class="row py-2">
                                    <div class="col-md">
                                        <label for="precioPanel"><strong>Precio total del Panel:</strong></label>
                                        <span id="spanPrecioPanel" class="form-control"></span>
                                    </div>
                                </div>


                                <div class="row py-2">
                                    <div class="col-md">
                                        <label for="instalacion"><strong>Servicio de Instalación:</strong></label>
                                        <select class="form-control" id="instalacion" name="instalacion">
                                            <option value="">--seleccionar--</option>
                                            <option value="Si">Si</option>
                                            <option value="No">No</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="row py-2">
                                    <div class="col-md">
                                        <label for="precioTotal"><strong>Precio total:</strong></label>
                                        <span class="form-control" id="spanPrecioTotal">s /. 0.00</span>
                                        <!-- <input class="form-control" type="text" id="precioTotal" name="precioTotal" required> -->
                                    </div>
                                </div>

                                <a href="#" class="btn btn-dark mt-3">
                                    <i class="bi bi-chevron-right"></i>
                                    Enviar
                                </a>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-3"></div>
            </div>
        </div>
    </section>

    <script>

        // Función para calcular el área
        function calcularArea(largo, ancho) {
            return largo * ancho;
        }

        // Función para calcular el precio
        function calcularPrecio(area, precioPorUnidad) {
            return area * precioPorUnidad;
        }

        document.addEventListener('DOMContentLoaded', function () {

            // Recuperar los datos de medidas del almacenamiento local
            var medidasGuardadas = localStorage.getItem('medidas');
            var spanPrecioPanel = document.getElementById('spanPrecioPanel');
            // Verificar si hay datos guardados
            if (medidasGuardadas) {
                try {
                    // Parsear los datos de formato JSON
                    var medidas = JSON.parse(medidasGuardadas);

                    // Obtener el área y el precio usando las funciones
                    var area = calcularArea(medidas.largo, medidas.ancho);
                    var precio = calcularPrecio(area, 250);
                    // Crear una cadena de medidas combinadas
                    var medidasCombinadas = `Largo: ${medidas.largo} || Ancho: ${medidas.ancho} || Grosor: ${medidas.grosor} || Altura: ${medidas.altura}`;
                    // Mostrar las medidas en el campo "Medidas" del formulario
                    var medidasInput = document.getElementById('medidas');
                    if (medidasInput) {
                        medidasInput.value = medidasCombinadas;
                    }
                    // Mostrar el precio en el elemento span
                    if (spanPrecioPanel) {
                        spanPrecioPanel.innerText = `S/ ${precio.toFixed(2)}`; // Ajustar el formato según necesites
                    }


                } catch (error) {
                    console.error('Error al parsear las medidas:', error);
                }
            }

            // Obtener referencia al elemento select
            var selectInstalacion = document.getElementById('instalacion');
            var spanPrecioTotal = document.getElementById('spanPrecioTotal');
            if (selectInstalacion) {
                selectInstalacion.addEventListener('change', function () {
                    // Obtener el valor seleccionado
                    var seleccion = selectInstalacion.value;
                    // Obtener el área y el precio usando las funciones
                    var area = calcularArea(medidas.largo, medidas.ancho);
                    var precio = calcularPrecio(area, 250);
                    // Definir el costo adicional por instalación
                    var costoInstalacion = 100;
                    // Calcular el precio total
                    var precioTotal = (seleccion === 'Si') ? precio + costoInstalacion : precio;
                    // Mostrar el precio total en el span
                    if (spanPrecioTotal) {
                        spanPrecioTotal.innerText = `S/ ${precioTotal.toFixed(2)}`;
                    }
                });

            }


            // Recuperar el color seleccionado de localStorage
            var colorSeleccionadoJSON = localStorage.getItem('colorSeleccionado');
            // Parsear el JSON
            var colorSeleccionadoObj = JSON.parse(colorSeleccionadoJSON);
            // Obtener las propiedades del objeto
            var color = colorSeleccionadoObj.color;
            var nombreColor = colorSeleccionadoObj.nombreColor;
            // Mostrar el color y nombre del color en el círculo y en el input
            var colorContainer = document.getElementById('colorContainer');
            var spanColoresEstampados = document.getElementById('spanColoresEstampados');
            if (colorContainer && spanColoresEstampados) {
                // Mostrar el color en el círculo
                colorContainer.style.backgroundColor = color || 'transparent'; // Si no hay color seleccionado, dejar transparente
                // Mostrar el nombre del color en el input
                spanColoresEstampados.innerText = nombreColor;
            }


            var imagenSeleccionadaJSON = localStorage.getItem('imagenSeleccionada');
            if (imagenSeleccionadaJSON) {
                try {
                    var imagenSeleccionadaObj = JSON.parse(imagenSeleccionadaJSON);
                    var estapandoContainer = document.getElementById('estapandoContainer');
                    if (estapandoContainer && imagenSeleccionadaObj) {
                        // Mostrar la imagen dentro del círculo
                        estapandoContainer.style.backgroundImage = `url('${imagenSeleccionadaObj.urlEstampado}')`;
                        estapandoContainer.style.backgroundColor = 'transparent';
                    }

                    var spanEstampados = document.getElementById('spanEstampados');

                    if (spanEstampados) {
                        // Mostrar la descripción en el span
                        spanEstampados.innerText = imagenSeleccionadaObj.descripcion || 'N/A';
                    }
                } catch (error) {
                    console.error('Error al parsear la información de la imagen:', error);
                }
            }


            var materialSeleccionadoJSON = localStorage.getItem('materialSeleccionado');
            if (materialSeleccionadoJSON) {
                try {
                    var materialSeleccionadoObj = JSON.parse(materialSeleccionadoJSON);
                    var adicionalContainer = document.getElementById('adicionalContainer');
                    var spanAdicional = document.getElementById('spanAdicional');
                    if (adicionalContainer && materialSeleccionadoObj) {
                        adicionalContainer.style.backgroundImage = `url('${materialSeleccionadoObj.urlAdicional}')`;
                    }

                    if (spanAdicional) {
                        spanAdicional.innerText = materialSeleccionadoObj.nombreMaterial || 'N/A';
                    }

                } catch (error) {
                    console.error('Error al parsear la información del material:', error);
                }
            }




        });

    </script>


    <!-- star footer section -->
    <section class="p-5 bg-light text-dark">
        <footer id="contact" class="page-footer  text-md-left">
            <div class="container">
                <div class="row g-4">
                    <div class=" col-md-2"></div>
                    <div class=" col-md-3">
                        <h5 class="text-uppercase font-weight-bold mb-4">
                            Wp$ShopM@rt
                        </h5>
                        <p>
                            Lorem ipsum dolor sit amet consectetur
                            adipisicing elit. Beatae, fugit.

                        </p>
                        <a href="#"><i class="bi bi-facebook text-blue mx-1 lead"></i></a>
                        <a href="#"><i class="bi bi-twitter text-blue mx-1 lead"></i></a>
                        <a href="#"><i class="bi bi-linkedin text-dark mx-1 lead"></i></a>
                        <a href="#"><i class="bi bi-instagram text-dark mx-1 lead"></i></a>
                    </div>
                    <div class=" col-md-2"></div>
                    <div class="col-md-3">
                        <h5 class="text-uppercase font-weight-bold mb-4">
                            Location
                        </h5>
                        <p class="d-flex"><i class="bi bi-geo-alt text-primary mx-2 lead"></i>
                            Av. Angelica Gamarra N° 14
                        </p>
                        <p class="d-flex  align-items-center"><i class="bi bi-phone text-primary mx-2 lead"></i>
                            +51-980-578-452
                        </p>
                        <p class="d-flex  align-items-center"><i class="bi bi-envelope text-primary mx-2 lead"></i>
                            moisesanibal@hotmail.com
                        </p>
                    </div>
                    <div class=" col-md-2"></div>
                </div>
            </div>
        </footer>
    </section>
    <!-- start footer bottom -->
    <footer class="p-3 bg-dark text-white text-center position-relative">
        <div class="container">
            <p class="mb-0">
                Copyright &copy; 2022 Wp$ShopM@rt
            </p>
            <a href="#" class="position-absolute bottom-0 end-0 ">
                <i class="bi bi-arrow-up-circle h1"></i>
            </a>
        </div>

    </footer>


</body>

</html>